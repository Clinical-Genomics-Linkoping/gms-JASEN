// Select multiple profiles by using -profile local, singularity

profiles {
  local {
    params.location='local'
    process.executor='local'
  }
  slurm {
    params.location='slurm'
    process.executor='slurm'
    process.queue='high'
  }
  conda {
    params.pkm = 'conda' 
    params.outdir = "/tmp/results_dev/jasen/"
  }
  singularity {
    params.pkm = 'singularity'
    singularity.enabled = true
    singularity.runOptions = "--bind /fs1/ --bind /local/"
    singularity.autoMounts = true
    params.outdir = "/fs1/results_dev/jasen/"
  }
}


process {
  withLable: min_allocation {
    cpus = 1
    memory = '2.GB'
    time = '15m'
  }
  withLabel: modest_allocation {
    cpus = 2 
    memory = '4.GB'
    time = '1h'
  }
  withLabel: max_allocation {
    cpus = 8
    memory = '7.GB'
    time = '2h'
  }
}
params { 
  input = "$baseDir/assets/test_data/sequencing_data/saureus_100k"
  reference = "$baseDir/assets/test_data/references/AP017922.1.fasta"
  adapters = "$baseDir/assets/test_data/adapters/NexteraPE-PE.fa"

  krakendb="$baseDir/assets/references/minikraken2/"
  krakendb_url="ftp://ftp.ccb.jhu.edu/pub/data/kraken2_dbs/16S_Silva138_20200326.tgz"
  kraken_db_download = true

  aribadb="$baseDir/assets/references/ariba/"
  ariba_db_download = true
}
manifest {
  name = 'genomic-medicine-sweden/JASEN'
  author = 'Isak Sylvin et al.'
  homePage = 'https://github.com/genomic-medicine-sweden/JASEN.git'
  description = 'Json producing Assembly driven microbial Sequence analysis pipeline to support Epitypification and Normalize classification decisions'
  mainScript = 'main.nf'
  nextflowVersion = '>=10.0.0'
  version = '0.1.0'
}
